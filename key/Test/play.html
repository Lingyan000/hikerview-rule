<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YongTengPlay</title>
    <link href="https://cdn.bootcss.com/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/semantic-ui/2.4.1/semantic.min.js"></script>
    <style>
        body {
            background-color: rgb(23, 23, 23);
            color: #ffffff;
        }

        #box {
            margin-top: -150px;
            text-align: center;
            position: relative;
        }

        .cover {
            position: relative;
            width: 100%;
        }

        .cover-img {
            position: relative;
            width: 100%;
        }

        .cover-img::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 101%;
            background: linear-gradient(to top, #171717 0%, rgba(23, 23, 23, 0.987) 6.48%, rgba(23, 23, 23, 0.951) 12.4%, rgba(23, 23, 23, 0.896) 18%, rgba(23, 23, 23, 0.825) 23.2%, rgba(23, 23, 23, 0.741) 28.24%, rgba(23, 23, 23, 0.648) 32.96%, rgba(23, 23, 23, 0.55) 37.68%, rgba(23, 23, 23, 0.45) 42.32%, rgba(23, 23, 23, 0.352) 47.04%, rgba(23, 23, 23, 0.259) 51.76%, rgba(23, 23, 23, 0.175) 56.8%, rgba(23, 23, 23, 0.104) 62%, rgba(23, 23, 23, 0.049) 67.6%, rgba(23, 23, 23, 0.013) 73.52%, rgba(23, 23, 23, 0) 80%);
            /* background: linear-gradient(to top, #171717 0%, rgba(23, 23, 23, 0.987) 1.62%, rgba(23, 23, 23, 0.951) 3.1%, rgba(23, 23, 23, 0.896) 4.5%, rgba(23, 23, 23, 0.825) 5.8%, rgba(23, 23, 23, 0.741) 7.06%, rgba(23, 23, 23, 0.648) 8.24%, rgba(23, 23, 23, 0.55) 9.42%, rgba(23, 23, 23, 0.45) 10.58%, rgba(23, 23, 23, 0.352) 11.76%, rgba(23, 23, 23, 0.259) 12.94%, rgba(23, 23, 23, 0.175) 14.2%, rgba(23, 23, 23, 0.104) 15.5%, rgba(23, 23, 23, 0.049) 16.9%, rgba(23, 23, 23, 0.013) 18.38%, rgba(23, 23, 23, 0) 20%); */
        }

        .playslist {
            text-align: center;
        }

        .playslist .button {
            height: 40px;
            padding: 2px;
            font-size: 14px;
            width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .lucklist .button {
            width: 60%;
        }

        .ui.grid>.column:not(.row) {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        .four.wide.mobile.two.wide.computer.column {
            padding-left: 0.2em;
            padding-right: 0.2em;
        }

        .sharpness button {
            width: 100px;
        }
    </style>
</head>

<body>
    <div id="pageload" class="ui active dimmer">
        <div class="ui text loader">åŠ è½½</div>
    </div>
    <div>
        <div class="cover">
            <div class="cover-img"><img class="cover-url" src="https://semantic-ui.com/images/wireframe/image.png"
                    alt="" style="width: 100%;">
            </div>
        </div>
        <div id="box" class="content ui container">
            <div>
                <h2 class="ui header center aligned title" style="color: #ffffff;">Title</h2>
                <span style="color: rgba(255,255,255,0.7);" class="desc">desc</span>
                <br>


                <div style="margin-top: 20px;">

                    <a href="https://qingbailingyan.gitee.io/plays" class="ui icon button" data-tooltip="ğŸ™Šè§„åˆ™"
                        style="margin-right: 10px;">
                        <i class="icon home"></i>
                    </a>

                    <button id="plays" class="ui button" style="margin: 0px;"><i class="play icon"></i> æ’­æ”¾
                    </button>
                    <div class="ui modal textselect">
                        <i class="close icon"></i>
                        <div class="header">è¯•è¯•è¿æ°”</div>
                        <div class="centered" style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
                            <h3 id="cw" style="color: black;"></h3>
                            <div class="ui action labeled input">
                                <div class="ui label">https://ipfs</div>
                                <input class="lucknumber" type="text" placeholder="æ•°å­—">
                                <button class="ui icon button luck">
                                    <i class="arrow right icon"></i>
                                </button>
                            </div>
                            <div class="ui divider"></div>
                            <div class="ui grid lucklist">
                            </div>
                        </div>
                        <div class="actions">
                            <div class="ui negative button">å…³é—­</div>
                            <div class="ui positive right labeled icon button luck">ç¡®è®¤<i class="checkmark icon"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ui modal sharpness">
                        <i class="close icon"></i>
                        <div class="header">æ¸…æ™°åº¦</div>
                        <div class="centered content sharpness" style="text-align: center;">
                        </div>
                    </div>
                    <div class="ui long modal plays">
                        <div class="header" id="playEpisodes">é€‰é›† </div>
                        <div class="content">
                            <div class="ui grid playslist">
                            </div>

                        </div>
                        <div class="actions">
                            <div class="ui negative  button">å…³é—­ <i class="right times icon"></i> </div>
                        </div>
                    </div>
                    <button id="info" class="ui icon button" data-tooltip="è¯¦æƒ…" style="margin-left: 10px;">
                        <i class="icon info circle"></i>
                    </button>
                    <div class="ui long modal info">
                        <div class="header title"></div>
                        <div class="image content">
                            <div class="ui medium image">
                                <div class="ui card">
                                    <div class="content">
                                        <img class="cover-url" src="https://semantic-ui.com/images/wireframe/image.png"
                                            alt="">
                                    </div>
                                </div>
                            </div>
                            <div class="description">
                                <div class="ui header">ç®€ä»‹</div>
                                <p class="info-text" style="color: black;"></p>
                            </div>
                        </div>
                        <div class="actions">
                            <div class="ui negative  button">å…³é—­ <i class="right times icon"></i> </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- <script src="https://cdn.jsdelivr.net/gh/Lingyan000/hikerview-rule/key/Test/js/play.min.js"></script> -->
    <script>
        var integrityurl = window.location.href;
        var integrityurl = integrityurl.split("#")[1];
        var episode = '';
        $(function () {
            $("#info").on("click", function () {
                $(".modal").modal("hide");
                $(".ui.modal.info").modal("show");
            })
            $("#plays").on("click", function () {
                $(".modal").modal("hide");
                $(".ui.modal.plays").modal("show");
            })
            $(".luck").on("click", function () {
                let url = "https://ipfs" + $(".lucknumber").val() + ".365kqzs.cn:9081/ipfs/" +
                    $(
                        ".lucknumber").attr("hash");
                fy_bridge_app.playVideo(url);
            })
        })

        /*è±†ç“£ä¿¡æ¯æ‹‰å–*/
        function doupan(keyword) {
            requestAsync('https://www.douban.com/search?q=' + keyword, function (key, result) {
                try {
                    let html = result;
                    let li = html.split('class="result"')[1];
                    $("title").html(li.split('class="nbg"')[1].split('</a>')[0].split('title="')[1].split('"')[
                        0] + "-å—ç“œå½±è§†");
                    fy_bridge_app.setWebTitle(li.split('class="nbg"')[1].split('</a>')[0].split('title="')[1]
                        .split('"')[0] + "-å—ç“œå½±è§†");
                    $(".cover-url").attr("src", 'https://images.weserv.nl/?url=' + li.split('img src="')[1]
                        .split('"')[0]);
                    $(".title").html(li.split('class="nbg"')[1].split('</a>')[0].split('title="')[1].split('"')[
                        0]);
                    $(".desc").html(li.split('"subject-cast">')[1].split('</span>')[0].replace(' / ', 'â€¢'));
                    $(".info-text").html(li.split('<p>')[1].split('</p>')[0]);
                } catch (e) {
                    alert(e);
                }
            });
        }

        $(function () {
            var playEpisodes;
            let data = request('hiker://files/playEpisodes.json');
            if (data != null && data.length > 0) {
                try {
                    playEpisodes = JSON.parse(data);
                    for (let i = 0; i < playEpisodes.length; i++) {
                        if (playEpisodes[i].url == integrityurl) {
                            $('#playEpisodes').html('é€‰é›† ğŸŒ¸ ä¸Šæ¬¡è§‚çœ‹åˆ°' + playEpisodes[i].episode);
                            break;
                        }
                    }
                } catch (e) {
                    console.log(e);
                }
            }
            window.callback = function (key, result) {
                $("#pageload").removeClass("active").addClass("disabled");
                try {
                    /*å°å°å½±è§†çš„å¸ƒå±€æ·»åŠ */
                    function xiaoxiao() {
                        let json = JSON.parse(result);
                        $("title").html(json.data.vodrow.title + '-å°å°å½±è§†');
                        fy_bridge_app.setWebTitle(json.data.vodrow.title + "-å°å°å½±è§†");
                        $(".cover-url").attr("src", json.data.vodrow.coverpic);
                        $(".title").html(json.data.vodrow.title);
                        $(".desc").html(json.data.vodrow.langvoicename + "â€¢" + json.data.vodrow.catename +
                            "â€¢" +
                            json.data.vodrow.episode_statustext);
                        $(".info-text").html(json.data.vodrow.intro);
                        let playlist = json.data.vodrow.playlist;
                        let playlistbtn = "";
                        for (i = 0; i < playlist.length; i++) {
                            let j = playlist[i];
                            let url = "https://ios.xiaoxiaoapps.com/vod/reqplay/" + json.data.vodrow.vodid +
                                "?playindex=" + j.playindex;
                            playlistbtn +=
                                '<div class="four wide mobile two wide computer column"><button onclick="play(\'' +
                                url +
                                '\',' + i + ');episode = \'' + j.play_name + '\';" class="ui button play' +
                                i + '">' +
                                j.play_name + '</button></div>';
                        }
                        $(".playslist").html(playlistbtn);
                    }

                    /*å‰§æ±‡TVçš„å¸ƒå±€æ·»åŠ */
                    function juhui() {
                        let json = JSON.parse(result);
                        $("title").html(json.data.programme.title + '-å‰§æ±‡TV');
                        fy_bridge_app.setWebTitle(json.data.programme.title + "-å‰§æ±‡TV");
                        $(".cover-url").attr("src", json.data.programme.verticalCover);
                        $(".title").html(json.data.programme.title);
                        let episodes = '';
                        if (json.data.programme.episodesCount != json.data.programme.resourceCount)
                            episodes = "æ›´æ–°è‡³" + json.data.programme.resourceCount + "é›†/å…±" + json.data
                            .programme.episodesCount + "é›†";
                        else
                            episodes = "å…¨" + json.data.programme.episodesCount + "é›†";
                        $(".desc").html(json.data.programme.location + "â€¢" + json.data.programme.category
                            .name +
                            "â€¢" +
                            episodes);
                        $(".info-text").html(json.data.programme.summary);
                        let playlist = json.data.programme.resources;
                        let playlistbtn = "";
                        for (i = 0; i < playlist.length; i++) {
                            let j = playlist[i];
                            sharpnesslist = JSON.stringify(j.data).replace(/\"/g, "YongTeng");
                            playlistbtn +=
                                '<div class="four wide mobile two wide computer column"><button onclick="sharpness(\'' +
                                sharpnesslist + '\');episode = \'' + j.episode + '\';" class="ui button">' +
                                j.episode + '</button></div>';
                        }
                        $(".playslist").html(playlistbtn);
                    }

                    /*å§é¾™çš„å¸ƒå±€æ·»åŠ */
                    function wolong() {
                        let json = JSON.parse(result);
                        $("title").html(json.data.title + '-å§é¾™å½±è§†');
                        fy_bridge_app.setWebTitle(json.data.title + "-å§é¾™å½±è§†");
                        let imgUrl = json.data.imgUrl;
                        if (json.data.imgUrl.indexOf("doubanio") != -1) {
                            imgUrl = "https://images.weserv.nl/?url=" + imgUrl;
                        }
                        $(".cover-url").attr("src", imgUrl);
                        $(".title").html(json.data.title);
                        if (json.data.updateText !== null && json.data.updateText !== undefined && json.data
                            .updateText !== '')
                            $(".desc").html(json.data.area + "â€¢" + json.data.year +
                                "â€¢" +
                                json.data.updateText);
                        else
                            $(".desc").html(json.data.area + "â€¢" + json.data.year);
                        $(".info-text").html(json.data.introduction);
                        /*ç”±äºå§é¾™çš„é›†æ•°éœ€è¦å†è¯·æ±‚ä¸€ä¸ªæ¥å£ï¼Œæ‰€ä»¥å¦å†™ä¸€ä¸ªæ–¹æ³•*/
                        wolongEpisode(json.data.videoId);
                    }

                    /*æ˜¥ç§‹å½±è§†çš„å¸ƒå±€æ·»åŠ */
                    function chunqiu() {
                        let json = JSON.parse(result);
                        $("title").html(json.data.vod.vod_name + '-æ˜¥ç§‹å½±è§†');
                        fy_bridge_app.setWebTitle(json.data.vod.vod_name + "-æ˜¥ç§‹å½±è§†");
                        $(".cover-url").attr("src", json.data.vod.vod_pic);
                        $(".title").html(json.data.vod.vod_name);
                        if (json.data.vod.remarks !== null && json.data.vod.remarks !== undefined && json
                            .data.vod.remarks !== '')
                            $(".desc").html(json.data.vod.vod_area + "â€¢" + json.data.vod.vod_year +
                                "â€¢" +
                                json.data.vod.remarks);
                        else
                            $(".desc").html(json.data.vod.vod_area + "â€¢" + json.data.vod.vod_year);
                        $(".info-text").html(json.data.vod.vod_content);
                        let playlist = json.data.vod.vod_url;
                        let playlistbtn = "";
                        for (i = 0; i < playlist.length; i++) {
                            let j = playlist[i];
                            let url = j.url;
                            playlistbtn +=
                                '<div class="four wide mobile two wide computer column"><button onclick="episode = \'' +
                                j.name + '\';episodeSave();" class="ui button play' + i + '">' +
                                j.name + '</button></div>';
                                fy_bridge_app.playVodeos([{title: 'è§†é¢‘1',url:  url,use: true},{title: 'è§†é¢‘2',url: playlist[i+1].url ,use: false}]);
                        }
                        $(".playslist").html(playlistbtn);
                    }

                    /*å—ç“œå½±è§†çš„å¸ƒå±€æ·»åŠ */
                    function nangua() {
                        doupan(integrityurl.split("yongteng")[1]);
                        let html = result;
                        let playlist = html.split('<table>')[1].split('</table>')[0].split('</tr>');
                        let playlistbtn = "";
                        for (i = 0; i < playlist.length - 1; i++) {
                            let j = playlist[i];
                            let title = j.split('<title>')[1].split('</title>')[0];
                            let url = j.split('<id>')[1].split('</id>')[0];
                            playlistbtn +=
                                '<div class="four wide mobile two wide computer column"><button onclick="nanguaplay(\'' +
                                url +
                                '\',' + i + ');" class="ui button play' + i + '">' +
                                title + '</button></div>';
                        }
                        $(".playslist").html(playlistbtn);
                    }

                    /*å§é¾™é›†æ•°*/
                    function wolongEpisode(id) {
                        requestAsync("http://v2.tgmmvip.com/wolong/gae/video/plays?videoId=" + id,
                            function (key, result) {
                                try {
                                    let json = JSON.parse(result);
                                    let playlist = json.data.plays;
                                    let playlistbtn = "";
                                    for (let i = 0; i < playlist.length; i++) {
                                        let j = playlist[i];
                                        let url = "";
                                        if (j.source == 0)
                                            playlistbtn +=
                                            '<div class="four wide mobile two wide computer column"><button onclick="fy_bridge_app.playVideo(\'' +
                                            j.playUrl +
                                            '\')" class="ui button">' +
                                            (i + 1) + '</button></div>';
                                        else
                                            playlistbtn +=
                                            '<div class="four wide mobile two wide computer column play' +
                                            i + '"><button onclick="sharpnessPost(\'' +
                                            j.playUrl + '\',' + j.source +
                                            ');$(this).addClass(\'loading\');episode = \'' + (i + 1) +
                                            '\';" class="ui button">' +
                                            (i + 1) + '</button></div>';
                                    }
                                    $(".playslist").html(playlistbtn);
                                } catch (e) {
                                    alert(e);
                                }
                            });
                    }

                    if (integrityurl.indexOf("xiaoxiaoapps.com/vod/show") != -1) xiaoxiao();
                    else if (integrityurl.indexOf("apis.365kqzs.cn/api/programmes") != -1) juhui();
                    else if (integrityurl.indexOf("v2.tgmmvip.com/wolong/gae/video/detail") != -1) wolong();
                    else if (integrityurl.indexOf("api.chunqiu.tv/api/vod/detail.html") != -1) chunqiu();
                    else if (integrityurl.indexOf("47.107.130.93:443/play/ng.php?id=") != -1) nangua();
                } catch (e) {
                    console.log(e);
                }
            }
            if (integrityurl.indexOf("apis.365kqzs.cn/api/programmes") != -1)
                requestAsync(integrityurl, {
                    headers: {
                        "content-type": "application/x-www-form-urlencoded",
                        "Device-ID": "10",
                        "User-Agent": "Viewer/1.2.25 Android/5.1.1 Phone/samsung-SM-N9760"
                    },
                    method: 'GET'
                }, callback);
            if (integrityurl.indexOf("api.chunqiu.tv/api/vod/detail.html") != -1)
                requestAsync(integrityurl.split('?')[0], {
                    headers: {
                        "content-type": "application/json"
                    },
                    body: '{"id": ' + integrityurl.split('?')[1] + '}',
                    method: 'POST'
                }, callback);
            if (integrityurl.indexOf("47.107.130.93:443/play/ng.php?id=") != -1)
                requestAsync(integrityurl.split("yongteng")[0], callback);
            else
                requestAsync(integrityurl, callback);
        });

        /*POSTè¯·æ±‚è·å–æ¸…æ™°åº¦ä¸æ’­æ”¾é“¾æ¥ï¼ˆä¸»è¦ç”¨äºå§é¾™å½±è§†ï¼‰*/
        function sharpnessPost(playurl, source) {
            requestAsync('http://v2.tgmmvip.com/wolong/parse/video/play', {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: 'timestamp=' + Math.round(new Date() / 1000) + '&sign=852772226371378&source=' + source +
                    '&deviceid=852772226371378&url=' + playurl.replace("&", "ï¼†ï¼†"),
                method: 'POST'
            }, function (key, result) {
                try {
                    let json = JSON.parse(result);
                    let sharpnesslist = json.data.items;
                    let sharpnesslistbtn = "";
                    for (let i = 0; i < sharpnesslist.length; i++) {
                        let j = sharpnesslist[i];
                        sharpnesslistbtn += '<button onclick="episodeSave();fy_bridge_app.playVideo(\'' +
                            j.mediaUrl +
                            '\')" class="ui basic button">' + j.mediaName + '</button><br><br>';
                    }
                    $(".centered.content.sharpness").html(sharpnesslistbtn);
                    $(".loading").removeClass("loading");
                    $(".modal").modal("hide");
                    $(".ui.modal.sharpness").modal("show");
                } catch (e) {
                    alert(e);
                }

            });
        }

        /*æ¸…æ™°åº¦*/
        function sharpness(sharpnesslist) {
            sharpnesslist = sharpnesslist.replace(/YongTeng/g, "\"")
            sharpnesslist = JSON.parse(sharpnesslist);
            let sharpnesslistbtn = "";
            for (i = 0; i < sharpnesslist.length; i++) {
                let url = "https://apis.365kqzs.cn/api/resource_url?hash=" + sharpnesslist[i].hash;
                sharpnesslistbtn += '<button onclick="play(\'' + url + '\',' + i +
                    ');$(\'.lucknumber\').attr(\'hash\', \'' + sharpnesslist[i].hash +
                    '\');" class="ui basic button play' + i +
                    '">' + sharpnesslist[i].displayName + '</button><br><br>';
            }
            $(".centered.content.sharpness").html(sharpnesslistbtn);
            $(".modal").modal("hide");
            $(".ui.modal.sharpness").modal("show");
        }

        /*å—ç“œå½±è§†çš„è§†é¢‘æ’­æ”¾*/
        function nanguaplay(url, playbtn) {
            var playbtnclass = ".play" + playbtn;
            $(playbtnclass).addClass("loading");
            $.ajax({
                type: 'HEAD',
                url: url,
                complete: function (xhr, data) {
                    $(".loading").removeClass("loading");
                }
            });
        }

        /*æ’­æ”¾*/
        function play(url, playbtn) {
            var playbtnclass = ".play" + playbtn;
            $(playbtnclass).addClass("loading");
            window.callbackplay = function (key, result) {
                try {
                    /*å°å°å½±è§†çš„è§†é¢‘æ’­æ”¾*/
                    function xiaoxiaoplay() {
                        let json = JSON.parse(result);
                        var playUrl = url;
                        let playUrl2;
                        if (json.retcode == 3)
                            playUrl2 = json.data.httpurl_preview.replace("?300", "");
                        else
                            playUrl2 = json.data.httpurl;
                        if (playUrl2.indexOf('wssecret') > -1)
                            fy_bridge_app.playVideo(playUrl2);
                        else {
                            playUrl =
                                `http://renwfy.top/itv/video/play?path=${playUrl.split('reqplay/')[1].split('?')[0]}%2F${playUrl.split('playindex=')[1]}&source=xxiao&`;
                            let ikuXiaoxiao = JSON.parse(request(playUrl));
                            fy_bridge_app.playVideo(ikuXiaoxiao.data.url);
                        }
                    }

                    /*å‰§æ±‡TVçš„è§†é¢‘æ’­æ”¾*/
                    function juhuiplay() {
                        let json = JSON.parse(result);
                        if (json.success == true) {
                            url = json.data.url;
                            fy_bridge_app.playVideo(url);
                        } else {
                            $("#cw").html('å°½ç®¡â€œ' + json.message + '"<br/>ä½†æ˜¯ä½ å¯ä»¥è¯•è¯•è¾“å…¥æ•°å­—æˆ–è€…ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œé¡ºåºæŒ‰ç…§è®¿é—®é€Ÿåº¦æ’åˆ—ã€‚');
                            $(".modal").modal("hide");
                            $(".ui.modal.textselect").modal("show");
                            $(".lucklist").html("");
                            for (let i = 1; i < 30; i++) {
                                var xhr = $.ajax({
                                    type: 'HEAD',
                                    url: 'https://ipfs' + i +
                                        '.365kqzs.cn:9081/ipfs/' + $(".lucknumber").attr("hash"),
                                    timeout: 5000,
                                    complete: function (xhr, data) {
                                        if (xhr.readyState == 4 && xhr.status == 200)
                                            $(".lucklist").append(
                                                '<div class="four wide mobile two wide computer column"><button onclick="fy_bridge_app.playVideo(\'https://ipfs' +
                                                i +
                                                '.365kqzs.cn:9081/ipfs/' + $(".lucknumber").attr(
                                                    "hash") +
                                                '\');" class="ui button">' +
                                                i + '</button></div>'
                                            );
                                    }
                                });
                            }
                        }
                    }
                    episodeSave();

                    if (integrityurl.indexOf("xiaoxiaoapps.com/vod/show") != -1) xiaoxiaoplay();
                    else if (integrityurl.indexOf("apis.365kqzs.cn/api/programmes") != -1) juhuiplay();
                } catch (e) {
                    alert(e);
                }
                $(".loading").removeClass("loading");
            }
            if (integrityurl.indexOf("apis.365kqzs.cn/api/programmes") != -1)
                requestAsync(url, {
                    headers: {
                        "content-type": "application/x-www-form-urlencoded",
                        "Device-ID": "10",
                        "User-Agent": "Viewer/1.2.25 Android/5.1.1 Phone/samsung-SM-N9760"
                    },
                    method: 'GET'
                }, callbackplay);
            else
                requestAsync(url, callbackplay);
        }

        /*ä¿å­˜é›†æ•°*/
        function episodeSave() {
            var playEpisodes;
            let data = request('hiker://files/playEpisodes.json');
            if (data != null && data.length > 0) {
                try {
                    playEpisodes = JSON.parse(data);
                    if (playEpisodes.length > 50) {
                        playEpisodes.splice(0, playEpisodes.length - 50)
                    }
                    var isDuplication = false;
                    for (let i = 0; i < playEpisodes.length; i++) {
                        if (playEpisodes[i].url == integrityurl) {
                            isDuplication = true;
                            playEpisodes.splice(i, 1);
                            playEpisodes.push({
                                title: $(document).attr("title"),
                                url: integrityurl,
                                episode: episode
                            });
                            break;
                        }
                    }
                    if (isDuplication == false)
                        playEpisodes.push({
                            title: $(document).attr("title"),
                            url: integrityurl,
                            episode: episode
                        });
                } catch (e) {
                    console.log(e);
                    fy_bridge_app.writeFile('hiker://files/playEpisodes.json', '');
                    playEpisodes = [{
                        title: $(document).attr("title"),
                        url: integrityurl,
                        episode: episode
                    }];
                }

            } else {
                playEpisodes = [{
                    title: $(document).attr("title"),
                    url: integrityurl,
                    episode: episode
                }];
            }
            fy_bridge_app.writeFile('hiker://files/playEpisodes.json', JSON.stringify(playEpisodes));
        }

        function isExitsFunction(funcName) {
            try {
                if (typeof (eval(funcName)) == "function") {
                    return true;
                }
            } catch (e) {}
            return false;
        }
    </script>
</body>

</html>